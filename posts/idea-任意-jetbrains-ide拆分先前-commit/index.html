<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>IDEA （任意 JetBrains IDE）拆分先前 commit | Aaron Lin</title>
<meta name=keywords content><meta name=description content="最近在合并上游代码，遇到了一个问题：某个 commit 杂糅了几个不同的特性修改，这可能会导致 rebase 上游代码时需要再对该 commit 进行额外的代码冲突处理
解决方法：合并上游分支前，拆分杂糅的 commit，并将其中不同的特性修改合并（Squash）回相关的 commit。可以直接通过命令行进行操作，可以参考：Break a previous commit into multiple commits。也可以通过 JetBrains 家内置的 Git 进行操作，下面会介绍 IDEA 图形化操作的方法
非先前 commit 的拆分
对于刚提交的 commit，要拆分多个 commit 是非常容易的，因为我们只要 soft reset commit，将 commit 内容撤销回至 暂存区，就可以随意提交 commit
如果对于 soft reset 不太了解，可以参考我之前的博客：Git 中的回退操作：reset 和 revert 
先前 commit 的拆分
先前 commit 指的是：在目标 commit 后已经有了若干个 commit。它无法直接通过 soft reset 进行拆分，因为这样会丢失后续的 commit，如下图，我们需要拆分 B commit，我们就无法直接使用 soft reset ，因为这样会丢失 C 和 D commit 的修改
所以我们需要使用 rebase，具体步骤：

在 交互式 (interactive) rebase 中将 B 标记为 edit，这时 B 后面的 commit 会被暂时隐藏起来
使用 soft reset 将 B 撤销回 暂存区
将 B 的修改内容分多个 commit 提交 B1 和 B2
使用 rebase 的 continue 将刚才隐藏的 C 和 D 恢复回来，需要注意的是：因为之前的 commit 记录已经改变了，所以这时的 C 和 D 已经与原来的 commit 记录不相同，故标记为 C' 和 D'

"><meta name=author content><link rel=canonical href=https://aaronlinv.github.io/posts/idea-%E4%BB%BB%E6%84%8F-jetbrains-ide%E6%8B%86%E5%88%86%E5%85%88%E5%89%8D-commit/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://aaronlinv.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://aaronlinv.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://aaronlinv.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://aaronlinv.github.io/apple-touch-icon.png><link rel=mask-icon href=https://aaronlinv.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://aaronlinv.github.io/posts/idea-%E4%BB%BB%E6%84%8F-jetbrains-ide%E6%8B%86%E5%88%86%E5%85%88%E5%89%8D-commit/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://aaronlinv.github.io/posts/idea-%E4%BB%BB%E6%84%8F-jetbrains-ide%E6%8B%86%E5%88%86%E5%85%88%E5%89%8D-commit/"><meta property="og:site_name" content="Aaron Lin"><meta property="og:title" content="IDEA （任意 JetBrains IDE）拆分先前 commit"><meta property="og:description" content="最近在合并上游代码，遇到了一个问题：某个 commit 杂糅了几个不同的特性修改，这可能会导致 rebase 上游代码时需要再对该 commit 进行额外的代码冲突处理
解决方法：合并上游分支前，拆分杂糅的 commit，并将其中不同的特性修改合并（Squash）回相关的 commit。可以直接通过命令行进行操作，可以参考：Break a previous commit into multiple commits。也可以通过 JetBrains 家内置的 Git 进行操作，下面会介绍 IDEA 图形化操作的方法
非先前 commit 的拆分 对于刚提交的 commit，要拆分多个 commit 是非常容易的，因为我们只要 soft reset commit，将 commit 内容撤销回至 暂存区，就可以随意提交 commit
如果对于 soft reset 不太了解，可以参考我之前的博客：Git 中的回退操作：reset 和 revert 先前 commit 的拆分 先前 commit 指的是：在目标 commit 后已经有了若干个 commit。它无法直接通过 soft reset 进行拆分，因为这样会丢失后续的 commit，如下图，我们需要拆分 B commit，我们就无法直接使用 soft reset ，因为这样会丢失 C 和 D commit 的修改
所以我们需要使用 rebase，具体步骤：
在 交互式 (interactive) rebase 中将 B 标记为 edit，这时 B 后面的 commit 会被暂时隐藏起来 使用 soft reset 将 B 撤销回 暂存区 将 B 的修改内容分多个 commit 提交 B1 和 B2 使用 rebase 的 continue 将刚才隐藏的 C 和 D 恢复回来，需要注意的是：因为之前的 commit 记录已经改变了，所以这时的 C 和 D 已经与原来的 commit 记录不相同，故标记为 C' 和 D' "><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-03-27T08:50:33+08:00"><meta property="article:modified_time" content="2024-03-27T08:50:33+08:00"><meta property="og:image" content="https://aaronlinv.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://aaronlinv.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="IDEA （任意 JetBrains IDE）拆分先前 commit"><meta name=twitter:description content="最近在合并上游代码，遇到了一个问题：某个 commit 杂糅了几个不同的特性修改，这可能会导致 rebase 上游代码时需要再对该 commit 进行额外的代码冲突处理
解决方法：合并上游分支前，拆分杂糅的 commit，并将其中不同的特性修改合并（Squash）回相关的 commit。可以直接通过命令行进行操作，可以参考：Break a previous commit into multiple commits。也可以通过 JetBrains 家内置的 Git 进行操作，下面会介绍 IDEA 图形化操作的方法
非先前 commit 的拆分
对于刚提交的 commit，要拆分多个 commit 是非常容易的，因为我们只要 soft reset commit，将 commit 内容撤销回至 暂存区，就可以随意提交 commit
如果对于 soft reset 不太了解，可以参考我之前的博客：Git 中的回退操作：reset 和 revert 
先前 commit 的拆分
先前 commit 指的是：在目标 commit 后已经有了若干个 commit。它无法直接通过 soft reset 进行拆分，因为这样会丢失后续的 commit，如下图，我们需要拆分 B commit，我们就无法直接使用 soft reset ，因为这样会丢失 C 和 D commit 的修改
所以我们需要使用 rebase，具体步骤：

在 交互式 (interactive) rebase 中将 B 标记为 edit，这时 B 后面的 commit 会被暂时隐藏起来
使用 soft reset 将 B 撤销回 暂存区
将 B 的修改内容分多个 commit 提交 B1 和 B2
使用 rebase 的 continue 将刚才隐藏的 C 和 D 恢复回来，需要注意的是：因为之前的 commit 记录已经改变了，所以这时的 C 和 D 已经与原来的 commit 记录不相同，故标记为 C' 和 D'

"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://aaronlinv.github.io/posts/"},{"@type":"ListItem","position":2,"name":"IDEA （任意 JetBrains IDE）拆分先前 commit","item":"https://aaronlinv.github.io/posts/idea-%E4%BB%BB%E6%84%8F-jetbrains-ide%E6%8B%86%E5%88%86%E5%85%88%E5%89%8D-commit/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"IDEA （任意 JetBrains IDE）拆分先前 commit","name":"IDEA （任意 JetBrains IDE）拆分先前 commit","description":"最近在合并上游代码，遇到了一个问题：某个 commit 杂糅了几个不同的特性修改，这可能会导致 rebase 上游代码时需要再对该 commit 进行额外的代码冲突处理\n解决方法：合并上游分支前，拆分杂糅的 commit，并将其中不同的特性修改合并（Squash）回相关的 commit。可以直接通过命令行进行操作，可以参考：Break a previous commit into multiple commits。也可以通过 JetBrains 家内置的 Git 进行操作，下面会介绍 IDEA 图形化操作的方法\n非先前 commit 的拆分 对于刚提交的 commit，要拆分多个 commit 是非常容易的，因为我们只要 soft reset commit，将 commit 内容撤销回至 暂存区，就可以随意提交 commit\n如果对于 soft reset 不太了解，可以参考我之前的博客：Git 中的回退操作：reset 和 revert 先前 commit 的拆分 先前 commit 指的是：在目标 commit 后已经有了若干个 commit。它无法直接通过 soft reset 进行拆分，因为这样会丢失后续的 commit，如下图，我们需要拆分 B commit，我们就无法直接使用 soft reset ，因为这样会丢失 C 和 D commit 的修改\n所以我们需要使用 rebase，具体步骤：\n在 交互式 (interactive) rebase 中将 B 标记为 edit，这时 B 后面的 commit 会被暂时隐藏起来 使用 soft reset 将 B 撤销回 暂存区 将 B 的修改内容分多个 commit 提交 B1 和 B2 使用 rebase 的 continue 将刚才隐藏的 C 和 D 恢复回来，需要注意的是：因为之前的 commit 记录已经改变了，所以这时的 C 和 D 已经与原来的 commit 记录不相同，故标记为 C' 和 D' ","keywords":[],"articleBody":"最近在合并上游代码，遇到了一个问题：某个 commit 杂糅了几个不同的特性修改，这可能会导致 rebase 上游代码时需要再对该 commit 进行额外的代码冲突处理\n解决方法：合并上游分支前，拆分杂糅的 commit，并将其中不同的特性修改合并（Squash）回相关的 commit。可以直接通过命令行进行操作，可以参考：Break a previous commit into multiple commits。也可以通过 JetBrains 家内置的 Git 进行操作，下面会介绍 IDEA 图形化操作的方法\n非先前 commit 的拆分 对于刚提交的 commit，要拆分多个 commit 是非常容易的，因为我们只要 soft reset commit，将 commit 内容撤销回至 暂存区，就可以随意提交 commit\n如果对于 soft reset 不太了解，可以参考我之前的博客：Git 中的回退操作：reset 和 revert 先前 commit 的拆分 先前 commit 指的是：在目标 commit 后已经有了若干个 commit。它无法直接通过 soft reset 进行拆分，因为这样会丢失后续的 commit，如下图，我们需要拆分 B commit，我们就无法直接使用 soft reset ，因为这样会丢失 C 和 D commit 的修改\n所以我们需要使用 rebase，具体步骤：\n在 交互式 (interactive) rebase 中将 B 标记为 edit，这时 B 后面的 commit 会被暂时隐藏起来 使用 soft reset 将 B 撤销回 暂存区 将 B 的修改内容分多个 commit 提交 B1 和 B2 使用 rebase 的 continue 将刚才隐藏的 C 和 D 恢复回来，需要注意的是：因为之前的 commit 记录已经改变了，所以这时的 C 和 D 已经与原来的 commit 记录不相同，故标记为 C' 和 D' 实例准备 演示使用 IDEA，其实 JetBrains 家的使用逻辑差不多，示例仓库使用：Learn Go with Tests\ngit clone git@github.com:quii/learn-go-with-tests.git 需要用到 Rebase，IDEA 默认保护主分支，改写 commit 记录的功能会被禁用\n需要先取消分支保护，移除 Protected branches 中的 master;main\n假设我们需要将下面 commit 拆分为两个： 1. 启动 Rebase 并标记目标 commit 为 edit 点击 Interactively Rebase from Here... 选择需要拆分的 commit，右键选择 Stop to Edit，然后再点击 Start Rebasing 这时有右下角会提示您正在处于 Rebase 状态 选择框可以选择 Continue 即继续 Rebase，Abort 则会退出 Rebase commit 列表也会显示感叹号 2. 使用 soft reset 将 commit 撤销回 暂存区 我们需要先 soft reset 到目标 commit 的上一个 commit 选择上一个 commit，右键选择：Reset Current Branch to Here... 选择 Soft，这样目标 commit 的修改就会退回到暂存区 3. 将暂存区改动分为若干个 commit 提交 这个时候我们就可以继续分开提交两次 commit 查看 log，两条 commit 被成功提交 4. 使用 rebase 的 continue 恢复剩下的 commit 这时候我们需要继续 Rebase，将剩下的 commit 还原回去：点击右下角分分支按钮，选择 Continue Rebase 完成 Rebase 后，剩余的 commit 就会被追加到我们新提交的 commit 后面，至此我们就完成了先前 commit 的拆分 Rebase edit 的拓展 因为这里的案例只是拆分 commit，没有对 commit 进行修改，如果是修改的话，修改完成后需要使用 git add 将文件标记为已修改，才能使用 rebase 的 continue，这样该 commit 就会被修改。后续的 commit 有可能与本次的改动产生冲突，需要手动处理冲突\n参考资料 Break a previous commit into multiple commits\n","wordCount":"251","inLanguage":"en","image":"https://aaronlinv.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-03-27T08:50:33+08:00","dateModified":"2024-03-27T08:50:33+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://aaronlinv.github.io/posts/idea-%E4%BB%BB%E6%84%8F-jetbrains-ide%E6%8B%86%E5%88%86%E5%85%88%E5%89%8D-commit/"},"publisher":{"@type":"Organization","name":"Aaron Lin","logo":{"@type":"ImageObject","url":"https://aaronlinv.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://aaronlinv.github.io/ accesskey=h title="Aaron's Blog (Alt + H)">Aaron's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://aaronlinv.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://aaronlinv.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://aaronlinv.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://aaronlinv.github.io/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">IDEA （任意 JetBrains IDE）拆分先前 commit</h1><div class=post-meta><span title='2024-03-27 08:50:33 +0800 +0800'>March 27, 2024</span></div></header><div class=post-content><p>最近在合并上游代码，遇到了一个问题：某个 commit 杂糅了几个不同的特性修改，这可能会导致 rebase 上游代码时需要再对该 commit 进行额外的代码冲突处理</p><p>解决方法：合并上游分支前，拆分杂糅的 commit，并将其中不同的特性修改合并（Squash）回相关的 commit。可以直接通过命令行进行操作，可以参考：<a href=https://stackoverflow.com/a/6217314>Break a previous commit into multiple commits</a>。也可以通过 JetBrains 家内置的 Git 进行操作，下面会介绍 IDEA 图形化操作的方法</p><h2 id=非先前-commit-的拆分>非先前 commit 的拆分<a hidden class=anchor aria-hidden=true href=#非先前-commit-的拆分>#</a></h2><p>对于刚提交的 commit，要拆分多个 commit 是非常容易的，因为我们只要 <code>soft reset</code> commit，将 commit 内容撤销回至 <code>暂存区</code>，就可以随意提交 commit</p><p>如果对于 <code>soft reset</code> 不太了解，可以参考我之前的博客：<a href=https://www.cnblogs.com/aaronlinv/p/16454183.html>Git 中的回退操作：reset 和 revert</a></p><h2 id=先前-commit-的拆分>先前 commit 的拆分<a hidden class=anchor aria-hidden=true href=#先前-commit-的拆分>#</a></h2><p>先前 commit 指的是：在目标 commit 后已经有了若干个 commit。它无法直接通过 <code>soft reset</code> 进行拆分，因为这样会丢失后续的 commit，如下图，我们需要拆分 <code>B</code> commit，我们就无法直接使用 <code>soft reset</code> ，因为这样会丢失 <code>C</code> 和 <code>D</code> commit 的修改</p><p>所以我们需要使用 rebase，具体步骤：</p><ol><li>在 交互式 (interactive) rebase 中将 <code>B</code> 标记为 <code>edit</code>，这时 <code>B</code> 后面的 commit 会被暂时隐藏起来</li><li>使用 <code>soft reset</code> 将 <code>B</code> 撤销回 <code>暂存区</code></li><li>将 <code>B</code> 的修改内容分多个 commit 提交 <code>B1</code> 和 <code>B2</code></li><li>使用 rebase 的 <code>continue</code> 将刚才隐藏的 <code>C</code> 和 <code>D</code> 恢复回来，需要注意的是：因为之前的 commit 记录已经改变了，所以这时的 <code>C</code> 和 <code>D</code> 已经与原来的 commit 记录不相同，故标记为 <code>C'</code> 和 <code>D'</code></li></ol><p><img loading=lazy src=IDEA%EF%BC%88%E4%BB%BB%E6%84%8FJetBrainsIDE%EF%BC%89%E6%8B%86%E5%88%86%E5%85%88%E5%89%8Dcommit/1929786-20240406133647807-70803179.png></p><h3 id=实例准备>实例准备<a hidden class=anchor aria-hidden=true href=#实例准备>#</a></h3><p>演示使用 IDEA，其实 JetBrains 家的使用逻辑差不多，示例仓库使用：<a href=https://github.com/quii/learn-go-with-tests>Learn Go with Tests</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>git clone git@github.com:quii/learn-go-with-tests.git
</span></span></code></pre></div><p>需要用到 Rebase，IDEA 默认保护主分支，改写 commit 记录的功能会被禁用</p><p><img loading=lazy src=IDEA%EF%BC%88%E4%BB%BB%E6%84%8FJetBrainsIDE%EF%BC%89%E6%8B%86%E5%88%86%E5%85%88%E5%89%8Dcommit/1929786-20240326173139514-293363336.png></p><p>需要先取消分支保护，移除 <code>Protected branches</code> 中的 <code>master;main</code></p><p><img loading=lazy src=IDEA%EF%BC%88%E4%BB%BB%E6%84%8FJetBrainsIDE%EF%BC%89%E6%8B%86%E5%88%86%E5%85%88%E5%89%8Dcommit/1929786-20240326173325200-470557609.png></p><p>假设我们需要将下面 commit 拆分为两个：
<img loading=lazy src=IDEA%EF%BC%88%E4%BB%BB%E6%84%8FJetBrainsIDE%EF%BC%89%E6%8B%86%E5%88%86%E5%85%88%E5%89%8Dcommit/1929786-20240326173549906-1525247286.png></p><h3 id=1-启动-rebase-并标记目标-commit-为-edit>1. 启动 Rebase 并标记目标 commit 为 edit<a hidden class=anchor aria-hidden=true href=#1-启动-rebase-并标记目标-commit-为-edit>#</a></h3><p>点击 <code>Interactively Rebase from Here...</code>
<img loading=lazy src=IDEA%EF%BC%88%E4%BB%BB%E6%84%8FJetBrainsIDE%EF%BC%89%E6%8B%86%E5%88%86%E5%85%88%E5%89%8Dcommit/1929786-20240326173657561-355272434.png></p><p>选择需要拆分的 commit，右键选择 <code>Stop to Edit</code>，然后再点击 <code>Start Rebasing</code>
<img loading=lazy src=IDEA%EF%BC%88%E4%BB%BB%E6%84%8FJetBrainsIDE%EF%BC%89%E6%8B%86%E5%88%86%E5%85%88%E5%89%8Dcommit/1929786-20240326173955830-407995748.png></p><p>这时有右下角会提示您正在处于 <code>Rebase</code> 状态
选择框可以选择 <code>Continue</code> 即继续 Rebase，<code>Abort</code> 则会退出 Rebase
<img loading=lazy src=IDEA%EF%BC%88%E4%BB%BB%E6%84%8FJetBrainsIDE%EF%BC%89%E6%8B%86%E5%88%86%E5%85%88%E5%89%8Dcommit/1929786-20240326174502325-994025394.png></p><p>commit 列表也会显示感叹号
<img loading=lazy src=IDEA%EF%BC%88%E4%BB%BB%E6%84%8FJetBrainsIDE%EF%BC%89%E6%8B%86%E5%88%86%E5%85%88%E5%89%8Dcommit/1929786-20240326180325399-260917660.png></p><h3 id=2-使用-soft-reset-将-commit-撤销回-暂存区>2. 使用 soft reset 将 commit 撤销回 暂存区<a hidden class=anchor aria-hidden=true href=#2-使用-soft-reset-将-commit-撤销回-暂存区>#</a></h3><p>我们需要先 soft reset 到目标 commit 的上一个 commit
选择上一个 commit，右键选择：<code>Reset Current Branch to Here...</code>
<img loading=lazy src=IDEA%EF%BC%88%E4%BB%BB%E6%84%8FJetBrainsIDE%EF%BC%89%E6%8B%86%E5%88%86%E5%85%88%E5%89%8Dcommit/1929786-20240326181826922-371872963.png></p><p>选择 <code>Soft</code>，这样目标 commit 的修改就会退回到暂存区
<img loading=lazy src=IDEA%EF%BC%88%E4%BB%BB%E6%84%8FJetBrainsIDE%EF%BC%89%E6%8B%86%E5%88%86%E5%85%88%E5%89%8Dcommit/1929786-20240326181955939-1262699884.png>
<img loading=lazy src=IDEA%EF%BC%88%E4%BB%BB%E6%84%8FJetBrainsIDE%EF%BC%89%E6%8B%86%E5%88%86%E5%85%88%E5%89%8Dcommit/1929786-20240326200723734-869876115.png></p><h3 id=3-将暂存区改动分为若干个-commit-提交>3. 将暂存区改动分为若干个 commit 提交<a hidden class=anchor aria-hidden=true href=#3-将暂存区改动分为若干个-commit-提交>#</a></h3><p>这个时候我们就可以继续分开提交两次 commit
<img loading=lazy src=IDEA%EF%BC%88%E4%BB%BB%E6%84%8FJetBrainsIDE%EF%BC%89%E6%8B%86%E5%88%86%E5%85%88%E5%89%8Dcommit/1929786-20240326200837139-649603743.png>
<img loading=lazy src=IDEA%EF%BC%88%E4%BB%BB%E6%84%8FJetBrainsIDE%EF%BC%89%E6%8B%86%E5%88%86%E5%85%88%E5%89%8Dcommit/1929786-20240326200840847-260504442.png></p><p>查看 log，两条 commit 被成功提交
<img loading=lazy src=IDEA%EF%BC%88%E4%BB%BB%E6%84%8FJetBrainsIDE%EF%BC%89%E6%8B%86%E5%88%86%E5%85%88%E5%89%8Dcommit/1929786-20240326201317357-1477966212.png></p><h3 id=4-使用-rebase-的-continue-恢复剩下的-commit>4. 使用 rebase 的 continue 恢复剩下的 commit<a hidden class=anchor aria-hidden=true href=#4-使用-rebase-的-continue-恢复剩下的-commit>#</a></h3><p>这时候我们需要继续 Rebase，将剩下的 commit 还原回去：点击右下角分分支按钮，选择 <code>Continue Rebase</code>
<img loading=lazy src=IDEA%EF%BC%88%E4%BB%BB%E6%84%8FJetBrainsIDE%EF%BC%89%E6%8B%86%E5%88%86%E5%85%88%E5%89%8Dcommit/1929786-20240326204930715-1014809023.png></p><p>完成 Rebase 后，剩余的 commit 就会被追加到我们新提交的 commit 后面，至此我们就完成了先前 commit 的拆分
<img loading=lazy src=IDEA%EF%BC%88%E4%BB%BB%E6%84%8FJetBrainsIDE%EF%BC%89%E6%8B%86%E5%88%86%E5%85%88%E5%89%8Dcommit/1929786-20240326204843891-646919102.png></p><h2 id=rebase-edit-的拓展>Rebase edit 的拓展<a hidden class=anchor aria-hidden=true href=#rebase-edit-的拓展>#</a></h2><p>因为这里的案例只是拆分 commit，没有对 commit 进行修改，如果是修改的话，修改完成后需要使用 <code>git add</code> 将文件标记为已修改，才能使用 rebase 的 <code>continue</code>，这样该 commit 就会被修改。后续的 commit 有可能与本次的改动产生冲突，需要手动处理冲突</p><h2 id=参考资料>参考资料<a hidden class=anchor aria-hidden=true href=#参考资料>#</a></h2><p><a href=https://stackoverflow.com/a/6217314>Break a previous commit into multiple commits</a></p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://aaronlinv.github.io/posts/%E5%A6%82%E4%BD%95%E5%BC%84%E6%87%82%E5%A4%8D%E6%9D%82%E9%A1%B9%E7%9B%AE/><span class=title>« Prev</span><br><span>如何弄懂复杂项目</span>
</a><a class=next href=https://aaronlinv.github.io/posts/springboot-%E6%B5%8B%E8%AF%95%E5%AE%9E%E8%B7%B5---3@mockbean@spybean-%E6%8F%90%E5%8D%87%E6%B5%8B%E8%AF%95%E8%BF%90%E8%A1%8C%E9%80%9F%E5%BA%A6testcontainer/><span class=title>Next »</span><br><span>SpringBoot 测试实践 - 3：@MockBean、@SpyBean 、提升测试运行速度、Testcontainer</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://aaronlinv.github.io/>Aaron Lin</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>