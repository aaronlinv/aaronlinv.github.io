<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>安卓导航抽屉 Navigation Drawer 实现沉浸通知栏 | Aaron Lin</title>
<meta name=keywords content><meta name=description content='在使用 Navigation Drawer Activity 模版的时候，遇到了通知栏无法完全沉浸的问题，尝试搜索一些现有的解决方法，但是或多或少都会存在一些问题，通过反复尝试找到找到了一种比较靠谱的思路
环境
测试模拟器：Pixel 3A
compileSdk：32
minSdk：28
targetSdk：32
创建工程


默认效果展示：


修改步骤

设置状态栏变为透明：修改主题配置

 <item name="android:statusBarColor" tools:targetApi="l">?attr/colorPrimaryVariant</item>
修改为：
<item name="android:statusBarColor">@android:color/transparent</item>
修改后完整文件：
<resources>
    <!-- Base application theme. -->
    <style name="Theme.MyApplication" parent="Theme.MaterialComponents.DayNight.DarkActionBar">
        <!-- Primary brand color. -->
        <item name="colorPrimary">@color/purple_500</item>
        <item name="colorPrimaryVariant">@color/purple_700</item>
        <item name="colorOnPrimary">@color/white</item>
        <!-- Secondary brand color. -->
        <item name="colorSecondary">@color/teal_200</item>
        <item name="colorSecondaryVariant">@color/teal_700</item>
        <item name="colorOnSecondary">@color/black</item>
        <!-- Status bar color. -->
+       <item name="android:statusBarColor">@android:color/transparent</item>
        <!-- Customize your theme here. -->
    </style>

    <style name="Theme.MyApplication.NoActionBar">
        <item name="windowActionBar">false</item>
        <item name="windowNoTitle">true</item>
    </style>

    <style name="Theme.MyApplication.AppBarOverlay" parent="ThemeOverlay.AppCompat.Dark.ActionBar" />

    <style name="Theme.MyApplication.PopupOverlay" parent="ThemeOverlay.AppCompat.Light" />
</resources>
修改后的效果：

'><meta name=author content><link rel=canonical href=https://aaronlinv.github.io/posts/%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89-navigation-drawer-%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://aaronlinv.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://aaronlinv.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://aaronlinv.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://aaronlinv.github.io/apple-touch-icon.png><link rel=mask-icon href=https://aaronlinv.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://aaronlinv.github.io/posts/%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89-navigation-drawer-%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://aaronlinv.github.io/posts/%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89-navigation-drawer-%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/"><meta property="og:site_name" content="Aaron Lin"><meta property="og:title" content="安卓导航抽屉 Navigation Drawer 实现沉浸通知栏"><meta property="og:description" content='在使用 Navigation Drawer Activity 模版的时候，遇到了通知栏无法完全沉浸的问题，尝试搜索一些现有的解决方法，但是或多或少都会存在一些问题，通过反复尝试找到找到了一种比较靠谱的思路
环境 测试模拟器：Pixel 3A
compileSdk：32
minSdk：28
targetSdk：32
创建工程 默认效果展示： 修改步骤 设置状态栏变为透明：修改主题配置 <item name="android:statusBarColor" tools:targetApi="l">?attr/colorPrimaryVariant</item> 修改为：
<item name="android:statusBarColor">@android:color/transparent</item> 修改后完整文件：
<resources> <!-- Base application theme. --> <style name="Theme.MyApplication" parent="Theme.MaterialComponents.DayNight.DarkActionBar"> <!-- Primary brand color. --> <item name="colorPrimary">@color/purple_500</item> <item name="colorPrimaryVariant">@color/purple_700</item> <item name="colorOnPrimary">@color/white</item> <!-- Secondary brand color. --> <item name="colorSecondary">@color/teal_200</item> <item name="colorSecondaryVariant">@color/teal_700</item> <item name="colorOnSecondary">@color/black</item> <!-- Status bar color. --> + <item name="android:statusBarColor">@android:color/transparent</item> <!-- Customize your theme here. --> </style> <style name="Theme.MyApplication.NoActionBar"> <item name="windowActionBar">false</item> <item name="windowNoTitle">true</item> </style> <style name="Theme.MyApplication.AppBarOverlay" parent="ThemeOverlay.AppCompat.Dark.ActionBar" /> <style name="Theme.MyApplication.PopupOverlay" parent="ThemeOverlay.AppCompat.Light" /> </resources> 修改后的效果： '><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-10T09:08:33+08:00"><meta property="article:modified_time" content="2022-05-10T09:08:33+08:00"><meta property="og:image" content="https://aaronlinv.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://aaronlinv.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="安卓导航抽屉 Navigation Drawer 实现沉浸通知栏"><meta name=twitter:description content='在使用 Navigation Drawer Activity 模版的时候，遇到了通知栏无法完全沉浸的问题，尝试搜索一些现有的解决方法，但是或多或少都会存在一些问题，通过反复尝试找到找到了一种比较靠谱的思路
环境
测试模拟器：Pixel 3A
compileSdk：32
minSdk：28
targetSdk：32
创建工程


默认效果展示：


修改步骤

设置状态栏变为透明：修改主题配置

 <item name="android:statusBarColor" tools:targetApi="l">?attr/colorPrimaryVariant</item>
修改为：
<item name="android:statusBarColor">@android:color/transparent</item>
修改后完整文件：
<resources>
    <!-- Base application theme. -->
    <style name="Theme.MyApplication" parent="Theme.MaterialComponents.DayNight.DarkActionBar">
        <!-- Primary brand color. -->
        <item name="colorPrimary">@color/purple_500</item>
        <item name="colorPrimaryVariant">@color/purple_700</item>
        <item name="colorOnPrimary">@color/white</item>
        <!-- Secondary brand color. -->
        <item name="colorSecondary">@color/teal_200</item>
        <item name="colorSecondaryVariant">@color/teal_700</item>
        <item name="colorOnSecondary">@color/black</item>
        <!-- Status bar color. -->
+       <item name="android:statusBarColor">@android:color/transparent</item>
        <!-- Customize your theme here. -->
    </style>

    <style name="Theme.MyApplication.NoActionBar">
        <item name="windowActionBar">false</item>
        <item name="windowNoTitle">true</item>
    </style>

    <style name="Theme.MyApplication.AppBarOverlay" parent="ThemeOverlay.AppCompat.Dark.ActionBar" />

    <style name="Theme.MyApplication.PopupOverlay" parent="ThemeOverlay.AppCompat.Light" />
</resources>
修改后的效果：

'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://aaronlinv.github.io/posts/"},{"@type":"ListItem","position":2,"name":"安卓导航抽屉 Navigation Drawer 实现沉浸通知栏","item":"https://aaronlinv.github.io/posts/%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89-navigation-drawer-%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"安卓导航抽屉 Navigation Drawer 实现沉浸通知栏","name":"安卓导航抽屉 Navigation Drawer 实现沉浸通知栏","description":"在使用 Navigation Drawer Activity 模版的时候，遇到了通知栏无法完全沉浸的问题，尝试搜索一些现有的解决方法，但是或多或少都会存在一些问题，通过反复尝试找到找到了一种比较靠谱的思路\n环境 测试模拟器：Pixel 3A\ncompileSdk：32\nminSdk：28\ntargetSdk：32\n创建工程 默认效果展示： 修改步骤 设置状态栏变为透明：修改主题配置 \u0026lt;item name=\u0026#34;android:statusBarColor\u0026#34; tools:targetApi=\u0026#34;l\u0026#34;\u0026gt;?attr/colorPrimaryVariant\u0026lt;/item\u0026gt; 修改为：\n\u0026lt;item name=\u0026#34;android:statusBarColor\u0026#34;\u0026gt;@android:color/transparent\u0026lt;/item\u0026gt; 修改后完整文件：\n\u0026lt;resources\u0026gt; \u0026lt;!-- Base application theme. --\u0026gt; \u0026lt;style name=\u0026#34;Theme.MyApplication\u0026#34; parent=\u0026#34;Theme.MaterialComponents.DayNight.DarkActionBar\u0026#34;\u0026gt; \u0026lt;!-- Primary brand color. --\u0026gt; \u0026lt;item name=\u0026#34;colorPrimary\u0026#34;\u0026gt;@color/purple_500\u0026lt;/item\u0026gt; \u0026lt;item name=\u0026#34;colorPrimaryVariant\u0026#34;\u0026gt;@color/purple_700\u0026lt;/item\u0026gt; \u0026lt;item name=\u0026#34;colorOnPrimary\u0026#34;\u0026gt;@color/white\u0026lt;/item\u0026gt; \u0026lt;!-- Secondary brand color. --\u0026gt; \u0026lt;item name=\u0026#34;colorSecondary\u0026#34;\u0026gt;@color/teal_200\u0026lt;/item\u0026gt; \u0026lt;item name=\u0026#34;colorSecondaryVariant\u0026#34;\u0026gt;@color/teal_700\u0026lt;/item\u0026gt; \u0026lt;item name=\u0026#34;colorOnSecondary\u0026#34;\u0026gt;@color/black\u0026lt;/item\u0026gt; \u0026lt;!-- Status bar color. --\u0026gt; + \u0026lt;item name=\u0026#34;android:statusBarColor\u0026#34;\u0026gt;@android:color/transparent\u0026lt;/item\u0026gt; \u0026lt;!-- Customize your theme here. --\u0026gt; \u0026lt;/style\u0026gt; \u0026lt;style name=\u0026#34;Theme.MyApplication.NoActionBar\u0026#34;\u0026gt; \u0026lt;item name=\u0026#34;windowActionBar\u0026#34;\u0026gt;false\u0026lt;/item\u0026gt; \u0026lt;item name=\u0026#34;windowNoTitle\u0026#34;\u0026gt;true\u0026lt;/item\u0026gt; \u0026lt;/style\u0026gt; \u0026lt;style name=\u0026#34;Theme.MyApplication.AppBarOverlay\u0026#34; parent=\u0026#34;ThemeOverlay.AppCompat.Dark.ActionBar\u0026#34; /\u0026gt; \u0026lt;style name=\u0026#34;Theme.MyApplication.PopupOverlay\u0026#34; parent=\u0026#34;ThemeOverlay.AppCompat.Light\u0026#34; /\u0026gt; \u0026lt;/resources\u0026gt; 修改后的效果： ","keywords":[],"articleBody":"在使用 Navigation Drawer Activity 模版的时候，遇到了通知栏无法完全沉浸的问题，尝试搜索一些现有的解决方法，但是或多或少都会存在一些问题，通过反复尝试找到找到了一种比较靠谱的思路\n环境 测试模拟器：Pixel 3A\ncompileSdk：32\nminSdk：28\ntargetSdk：32\n创建工程 默认效果展示： 修改步骤 设置状态栏变为透明：修改主题配置 ?attr/colorPrimaryVariant 修改为：\n@android:color/transparent 修改后完整文件：\n","wordCount":"261","inLanguage":"en","image":"https://aaronlinv.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2022-05-10T09:08:33+08:00","dateModified":"2022-05-10T09:08:33+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://aaronlinv.github.io/posts/%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89-navigation-drawer-%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/"},"publisher":{"@type":"Organization","name":"Aaron Lin","logo":{"@type":"ImageObject","url":"https://aaronlinv.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://aaronlinv.github.io/ accesskey=h title="Aaron's Blog (Alt + H)">Aaron's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://aaronlinv.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://aaronlinv.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://aaronlinv.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://aaronlinv.github.io/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">安卓导航抽屉 Navigation Drawer 实现沉浸通知栏</h1><div class=post-meta><span title='2022-05-10 09:08:33 +0800 +0800'>May 10, 2022</span></div></header><div class=post-content><p>在使用 Navigation Drawer Activity 模版的时候，遇到了通知栏无法完全沉浸的问题，尝试搜索一些现有的解决方法，但是或多或少都会存在一些问题，通过反复尝试找到找到了一种比较靠谱的思路</p><h2 id=环境>环境<a hidden class=anchor aria-hidden=true href=#环境>#</a></h2><p>测试模拟器：Pixel 3A</p><p>compileSdk：32</p><p>minSdk：28</p><p>targetSdk：32</p><h3 id=创建工程>创建工程<a hidden class=anchor aria-hidden=true href=#创建工程>#</a></h3><p><img loading=lazy src=%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89NavigationDrawer%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/1929786-20220509210514734-1960395499.png>
<img loading=lazy src=%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89NavigationDrawer%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/1929786-20220509210525579-2009840573.png></p><h3 id=默认效果展示>默认效果展示：<a hidden class=anchor aria-hidden=true href=#默认效果展示>#</a></h3><p><img loading=lazy src=%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89NavigationDrawer%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/1929786-20220509210614755-1486958964.png>
<img loading=lazy src=%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89NavigationDrawer%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/1929786-20220509210619669-753508730.png></p><h2 id=修改步骤>修改步骤<a hidden class=anchor aria-hidden=true href=#修改步骤>#</a></h2><ol><li>设置状态栏变为透明：修改主题配置</li></ol><pre tabindex=0><code> &lt;item name=&#34;android:statusBarColor&#34; tools:targetApi=&#34;l&#34;&gt;?attr/colorPrimaryVariant&lt;/item&gt;
</code></pre><p>修改为：</p><pre tabindex=0><code>&lt;item name=&#34;android:statusBarColor&#34;&gt;@android:color/transparent&lt;/item&gt;
</code></pre><p>修改后完整文件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>&lt;resources&gt;
</span></span><span class=line><span class=cl>    &lt;!-- Base application theme. --&gt;
</span></span><span class=line><span class=cl>    &lt;style name=&#34;Theme.MyApplication&#34; parent=&#34;Theme.MaterialComponents.DayNight.DarkActionBar&#34;&gt;
</span></span><span class=line><span class=cl>        &lt;!-- Primary brand color. --&gt;
</span></span><span class=line><span class=cl>        &lt;item name=&#34;colorPrimary&#34;&gt;@color/purple_500&lt;/item&gt;
</span></span><span class=line><span class=cl>        &lt;item name=&#34;colorPrimaryVariant&#34;&gt;@color/purple_700&lt;/item&gt;
</span></span><span class=line><span class=cl>        &lt;item name=&#34;colorOnPrimary&#34;&gt;@color/white&lt;/item&gt;
</span></span><span class=line><span class=cl>        &lt;!-- Secondary brand color. --&gt;
</span></span><span class=line><span class=cl>        &lt;item name=&#34;colorSecondary&#34;&gt;@color/teal_200&lt;/item&gt;
</span></span><span class=line><span class=cl>        &lt;item name=&#34;colorSecondaryVariant&#34;&gt;@color/teal_700&lt;/item&gt;
</span></span><span class=line><span class=cl>        &lt;item name=&#34;colorOnSecondary&#34;&gt;@color/black&lt;/item&gt;
</span></span><span class=line><span class=cl>        &lt;!-- Status bar color. --&gt;
</span></span><span class=line><span class=cl><span class=gi>+       &lt;item name=&#34;android:statusBarColor&#34;&gt;@android:color/transparent&lt;/item&gt;
</span></span></span><span class=line><span class=cl><span class=gi></span>        &lt;!-- Customize your theme here. --&gt;
</span></span><span class=line><span class=cl>    &lt;/style&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &lt;style name=&#34;Theme.MyApplication.NoActionBar&#34;&gt;
</span></span><span class=line><span class=cl>        &lt;item name=&#34;windowActionBar&#34;&gt;false&lt;/item&gt;
</span></span><span class=line><span class=cl>        &lt;item name=&#34;windowNoTitle&#34;&gt;true&lt;/item&gt;
</span></span><span class=line><span class=cl>    &lt;/style&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &lt;style name=&#34;Theme.MyApplication.AppBarOverlay&#34; parent=&#34;ThemeOverlay.AppCompat.Dark.ActionBar&#34; /&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &lt;style name=&#34;Theme.MyApplication.PopupOverlay&#34; parent=&#34;ThemeOverlay.AppCompat.Light&#34; /&gt;
</span></span><span class=line><span class=cl>&lt;/resources&gt;
</span></span></code></pre></div><p>修改后的效果：
<img loading=lazy src=%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89NavigationDrawer%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/1929786-20220509210630970-1651493127.png>
<img loading=lazy src=%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89NavigationDrawer%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/1929786-20220509210636209-924413269.png></p><p>打开抽屉发现已经透明，但是会覆盖一层浅色阴影</p><ol start=2><li>在布局中增加 <code>fitsSystemWindows</code> 属性</li></ol><p>在 <code>app_bar_main.xml</code> 的 <code>androidx.coordinatorlayout.widget.CoordinatorLayout</code> 和 <code>com.google.android.material.appbar.AppBarLayout</code> 中增加：<code>android:fitsSystemWindows="true"</code>，这样它会自动的给View增加一个值等于状态栏高度的 PaddingTop，让它的背景颜色占据状态栏</p><p>完整代码：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
</span></span><span class=line><span class=cl>&lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;
</span></span><span class=line><span class=cl>    xmlns:app=&#34;http://schemas.android.com/apk/res-auto&#34;
</span></span><span class=line><span class=cl>    xmlns:tools=&#34;http://schemas.android.com/tools&#34;
</span></span><span class=line><span class=cl>    android:layout_width=&#34;match_parent&#34;
</span></span><span class=line><span class=cl>    android:layout_height=&#34;match_parent&#34;
</span></span><span class=line><span class=cl><span class=gi>+   android:fitsSystemWindows=&#34;true&#34;
</span></span></span><span class=line><span class=cl><span class=gi></span>    tools:context=&#34;.MainActivity&#34;&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &lt;com.google.android.material.appbar.AppBarLayout
</span></span><span class=line><span class=cl>        android:layout_width=&#34;match_parent&#34;
</span></span><span class=line><span class=cl>        android:layout_height=&#34;wrap_content&#34;
</span></span><span class=line><span class=cl><span class=gi>+       android:fitsSystemWindows=&#34;true&#34;
</span></span></span><span class=line><span class=cl><span class=gi></span>        android:theme=&#34;@style/Theme.MyApplication.AppBarOverlay&#34;&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        &lt;androidx.appcompat.widget.Toolbar
</span></span><span class=line><span class=cl>            android:id=&#34;@+id/toolbar&#34;
</span></span><span class=line><span class=cl>            android:layout_width=&#34;match_parent&#34;
</span></span><span class=line><span class=cl>            android:layout_height=&#34;?attr/actionBarSize&#34;
</span></span><span class=line><span class=cl>            android:background=&#34;?attr/colorPrimary&#34;
</span></span><span class=line><span class=cl>            app:popupTheme=&#34;@style/Theme.MyApplication.PopupOverlay&#34; /&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &lt;/com.google.android.material.appbar.AppBarLayout&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &lt;include layout=&#34;@layout/content_main&#34; /&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &lt;com.google.android.material.floatingactionbutton.FloatingActionButton
</span></span><span class=line><span class=cl>        android:id=&#34;@+id/fab&#34;
</span></span><span class=line><span class=cl>        android:layout_width=&#34;wrap_content&#34;
</span></span><span class=line><span class=cl>        android:layout_height=&#34;wrap_content&#34;
</span></span><span class=line><span class=cl>        android:layout_gravity=&#34;bottom|end&#34;
</span></span><span class=line><span class=cl>        android:layout_marginEnd=&#34;@dimen/fab_margin&#34;
</span></span><span class=line><span class=cl>        android:layout_marginBottom=&#34;16dp&#34;
</span></span><span class=line><span class=cl>        app:srcCompat=&#34;@android:drawable/ic_dialog_email&#34; /&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;
</span></span></code></pre></div><p>效果：</p><p><img loading=lazy src=%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89NavigationDrawer%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/1929786-20220509210649500-1994494725.png>
<img loading=lazy src=%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89NavigationDrawer%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/1929786-20220509210656790-468543009.png></p><ol start=3><li>修改 <code>activity_main.xml</code>，给 <code>com.google.android.material.navigation.NavigationView</code> 增加上 <code>app:insetForeground="@android:color/transparent"</code>，去除抽屉状态栏浅色阴影，</li></ol><p>效果：</p><p><img loading=lazy src=%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89NavigationDrawer%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/1929786-20220509210703658-1011643603.png></p><ol start=4><li>兼容深色模式</li></ol><p>切换到深色模式的效果：
<img loading=lazy src=%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89NavigationDrawer%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/1929786-20220509210710976-27408475.png>
<img loading=lazy src=%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89NavigationDrawer%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/1929786-20220509210722580-1676026619.png></p><p>修改：<code>night/themes.xml</code></p><p><img loading=lazy src=%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89NavigationDrawer%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/1929786-20220509210730892-1605884684.png></p><p>将 <code>android:statusBarColor</code> 设置为：<code>@android:color/transparent</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;item</span> <span class=na>name=</span><span class=s>&#34;android:statusBarColor&#34;</span><span class=nt>&gt;</span>@android:color/transparent<span class=nt>&lt;/item&gt;</span>
</span></span></code></pre></div><p>打开抽屉发现，这个时候状态栏已经透明了，但是状态栏背景还是会有一个黑色的背景色</p><p><img loading=lazy src=%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89NavigationDrawer%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/1929786-20220509210750558-1254180792.png>
<img loading=lazy src=%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89NavigationDrawer%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/1929786-20220509210757559-951559363.png></p><p>修改 <code>app_bar_main.xml</code>，在 <code>&lt;com.google.android.material.appbar.AppBarLayout</code> 中增加背景色，就可以了</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl>android:background=&#34;?attr/colorPrimary&#34;
</span></span></code></pre></div><p>最终效果：</p><p><img loading=lazy src=%E5%AE%89%E5%8D%93%E5%AF%BC%E8%88%AA%E6%8A%BD%E5%B1%89NavigationDrawer%E5%AE%9E%E7%8E%B0%E6%B2%89%E6%B5%B8%E9%80%9A%E7%9F%A5%E6%A0%8F/1929786-20220509210824389-1166499930.png></p><h2 id=fitssystemwindows-属性>fitsSystemWindows 属性<a hidden class=anchor aria-hidden=true href=#fitssystemwindows-属性>#</a></h2><p><code>android:fitsSystemWindows="true"</code> 的<a href=https://developer.android.com/reference/android/view/View#attr_android:fitsSystemWindows>官方文档描述</a>：</p><blockquote><p>Boolean internal attribute to adjust view layout based on system windows such as the status bar.
If true, adjusts the padding of this view to leave space for the system windows.
Will only take effect if this view is in a non-embedded activity.</p></blockquote><p>对某个 View 设置 <code>fitsSystemWindows</code> 为 true，本质就是给这个 View 设置了 padding，所以在 app_bar_main.xml 的 AppBarLayout 设置 <code>fitsSystemWindows</code>，这样可以使得 AppBarLayout 的背景可以通过 padding 延展到状态栏，通过对 AppBarLayout 设置背景，就可以到达沉浸状态栏的效果</p><h2 id=其他常用配置>其他常用配置<a hidden class=anchor aria-hidden=true href=#其他常用配置>#</a></h2><h3 id=设置状态栏为浅色模式文字为黑字>设置状态栏为浅色模式（文字为黑字）<a hidden class=anchor aria-hidden=true href=#设置状态栏为浅色模式文字为黑字>#</a></h3><p>代码：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>val</span> <span class=py>controller</span> <span class=p>=</span> <span class=nc>ViewCompat</span><span class=p>.</span><span class=n>getWindowInsetsController</span><span class=p>(</span><span class=n>binding</span><span class=p>.</span><span class=n>root</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>controller</span><span class=o>?.</span><span class=n>isAppearanceLightStatusBars</span> <span class=p>=</span> <span class=k>true</span>
</span></span></code></pre></div><p>或者使用主题 xml 来定义：</p><pre tabindex=0><code>&lt;item name=&#34;android:windowLightStatusBar&#34;&gt;true&lt;/item&gt;
</code></pre><h2 id=参考资料>参考资料<a hidden class=anchor aria-hidden=true href=#参考资料>#</a></h2><p><a href=https://developer.android.com/guide/topics/ui/look-and-feel/darktheme>深色主题背景</a>
<a href=https://stackoverflow.com/questions/31761046/what-exactly-does-fitssystemwindows-do>What exactly does fitsSystemWindows do?</a>
<a href="https://www.youtube.com/watch?v=a1CQPKuGM_A">No Action Bar & Transparent Status Bar</a>
<a href=https://www.cnblogs.com/Free-Thinker/p/8624791.html>Android沉浸式状态栏(透明状态栏)最佳实现</a>
<a href=https://www.jianshu.com/p/4927afb3b6e8>透明状态栏、全屏应用、沉浸模式</a>
<a href=https://blog.csdn.net/fwt336/article/details/80804516>NavigationView阴影</a>
<a href=https://loody.github.io/2016/02/21/2016-02-21-custom-toolbar/>定制你的Toolbar</a>
<a href=https://www.jianshu.com/p/c7bab1cbc9b4>Android 的style和theme</a></p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://aaronlinv.github.io/posts/git-%E4%B8%AD%E7%9A%84%E5%9B%9E%E9%80%80%E6%93%8D%E4%BD%9Creset-%E5%92%8C-revert/><span class=title>« Prev</span><br><span>Git 中的回退操作：reset 和 revert</span>
</a><a class=next href=https://aaronlinv.github.io/posts/%E4%BD%BF%E7%94%A8-postman-%E7%9A%84-environments-%E5%92%8C-tests-%E7%AE%80%E5%8C%96%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%8E%AF%E5%A2%83%E4%B8%AD%E7%9A%84%E5%88%87%E6%8D%A2%E6%AD%A5%E9%AA%A4/><span class=title>Next »</span><br><span>使用 Postman 的 Environments 和 Tests 简化在不同环境中的切换步骤</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://aaronlinv.github.io/>Aaron Lin</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>